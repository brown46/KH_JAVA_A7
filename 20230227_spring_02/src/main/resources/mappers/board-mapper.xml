<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">

	<insert id="insert">
		insert into BOARD values
		(	
			(select NVL(max(BOARD_NUM),0)+1 from BOARD)
			,#{boardTitle}
			,#{boardWriter}
			,#{boardContent}
			,#{boardOriginalFilename}
			,#{boardRenameFilename}
			, DEFAULT,DEFAULT
			,(select NVL(max(BOARD_NUM),0)+1 from BOARD)
			,DEFAULT
			,DEFAULT
		)
	</insert>
	<update id="update">
		update board set
			   board_Title= #{boardTitle}		
			 , board_Content= #{boardContent}	
			 , board_Original_Filename= #{boardOriginalFilename}	
			 , board_Rename_Filename= #{boardRenameFilename}
			 , board_Date = SYSDATE
		 where board_Num =#{boardNum}
	</update>
	<update id="updateReadCount">
		update board set
			   BOARD_READCOUNT= BOARD_READCOUNT+1		
		 where board_Num =#{boardNum}
	</update>
	<update id="updateForReply">
		update board 
		   set BOARD_REPLY_SEQ= BOARD_REPLY_SEQ+1
    	 where board_reply_seq> (select board_reply_seq from board where board_num=#{boardNum})
    	   and board_ref= (select board_ref from board where board_num=#{boardNum}) 
	</update>
	
	<delete id="delete">
		delete from board where board_Num =#{boardNum}
	</delete>
	<select id="selectOne" resultType="kh.spring.s02.board.model.vo.BoardVO">
		select * from board where board_Num =#{boardNum}
	</select>
	<select id="selectList" resultType="kh.spring.s02.board.model.vo.BoardVO">
		select * from board
	</select>
	
	<select id="selectOneCount" resultType="int">
		select count(*) cnt from board
	</select>
</mapper>
